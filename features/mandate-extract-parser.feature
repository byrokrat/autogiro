Feature: Mandate extract parser
  In order to work with the autogiro
  As a user
  I need to be able to parse mandate extracts

  Scenario: I parse the BGC testfile autogiro_exempelfil-utdrag-ur-medgivanderegistret_sv.txt
    Given a parser that ignores account and id structures
    When I parse:
    """
    0009912346196803050000000000000000010110819990101200801312      8901003232323232
    0009912346005556000521000000000000010220820070131200801311      5001000001000020
    0009912346005556000521000000000777101410820080131200802281
    0009912346191212121212000000000000010310820080611        2      3300001212121212
    0009912346005556000521000000000555100410620060101000000001
    0009912346196803050000000000000000010420820080131200802281      5001000001000020
    0009912346005556000521000000000000010510820050201200801311
    """
    Then I find a "AutogiroMandateExtractFile" layout
    And I find 7 "Mandate" nodes

  Scenario: I parse a BGC testfile in the old format
    Given a parser that ignores account and id structures
    When I parse:
    """
    0009912346196803050000000000000000010116199901012008013110     8901003232323232
    0009912346005556000521000000000000010226200701312008013110     5001000001000020
    0009912346005556000521000000000777101416200801312008022810
    0009912346191212121212000000000000010316200806110000000020     3300001212121212
    0009912346005556000521000000000555100416200601010000000010
    0009912346196803050000000000000000010426201602012016040410     5001000001000044
    0009912346005556000521000000000000010516200502012008013110     5001000001000020
    """
    Then I find a "AutogiroMandateExtractFile" layout
    And I find 7 "Mandate" nodes
